{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ASUS/Desktop/harsh2/CSE/React Development/firebase_project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/ASUS/Desktop/harsh2/CSE/React Development/firebase_project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/ASUS/Desktop/harsh2/CSE/React Development/firebase_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ASUS/Desktop/harsh2/CSE/React Development/firebase_project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useForm}from\"react-hook-form\";import*as yup from\"yup\";import{yupResolver}from'@hookform/resolvers/yup';import{addDoc,collection}from\"firebase/firestore\";import{db,auth}from\"../../config/firebase\";import{useAuthState}from'react-firebase-hooks/auth';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CreateForm=function CreateForm(){var _errors$title,_errors$title2;var navigate=useNavigate();var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var schema=yup.object().shape({title:yup.string().required(\"You must add a title\"),description:yup.string().required(\"You must add a description to the post...\")});var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var postsRef=collection(db,\"posts\");var onCreatePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return addDoc(postsRef,_objectSpread(_objectSpread({},data),{},{//this helps in getting all the values from the data variable..\nusername:user===null||user===void 0?void 0:user.displayName,userId:user===null||user===void 0?void 0:user.uid}));case 2:navigate(\"/\");case 3:case\"end\":return _context.stop();}},_callee);}));return function onCreatePost(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onCreatePost),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",placeholder:\"Title...\"},register(\"title\"))),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:(_errors$title=errors.title)===null||_errors$title===void 0?void 0:_errors$title.message}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread({placeholder:\"Description...\"},register(\"description\"))),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:(_errors$title2=errors.title)===null||_errors$title2===void 0?void 0:_errors$title2.message}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]});};","map":{"version":3,"names":["useForm","yup","yupResolver","addDoc","collection","db","auth","useAuthState","useNavigate","jsx","_jsx","jsxs","_jsxs","CreateForm","_errors$title","_errors$title2","navigate","_useAuthState","_useAuthState2","_slicedToArray","user","schema","object","shape","title","string","required","description","_useForm","resolver","register","handleSubmit","errors","formState","postsRef","onCreatePost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","_objectSpread","username","displayName","userId","uid","stop","_x","apply","arguments","onSubmit","children","type","placeholder","style","color","message","value"],"sources":["C:/Users/ASUS/Desktop/harsh2/CSE/React Development/firebase_project/src/pages/create-post/form.tsx"],"sourcesContent":["import { useForm } from \"react-hook-form\";\r\nimport * as yup from \"yup\";\r\nimport { yupResolver } from '@hookform/resolvers/yup'; \r\nimport { addDoc, collection } from \"firebase/firestore\";\r\nimport { db, auth } from \"../../config/firebase\";\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\ninterface CreateFormData {\r\n    title: string;\r\n    description: string;\r\n}\r\n\r\nexport const CreateForm = () => {\r\n    const navigate = useNavigate();\r\n    const [ user ] = useAuthState(auth);\r\n\r\n    const schema = yup.object().shape({\r\n        title: yup.string().required(\"You must add a title\"),\r\n        description: yup.string().required(\"You must add a description to the post...\"),\r\n    });\r\n\r\n    const { register, handleSubmit, formState: {errors} } = useForm<CreateFormData>({\r\n        resolver: yupResolver(schema),\r\n    });\r\n\r\n    const postsRef = collection(db, \"posts\");\r\n\r\n    const onCreatePost = async (data: CreateFormData) => {\r\n        await addDoc(postsRef, {\r\n            ...data,   //this helps in getting all the values from the data variable..\r\n            username: user?.displayName,\r\n            userId: user?.uid,\r\n        });\r\n\r\n        navigate(\"/\");\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit(onCreatePost)}>\r\n            <input type=\"text\" placeholder=\"Title...\" {...register(\"title\")}/>\r\n            <p style={{color: \"red\"}}>{errors.title?.message}</p>\r\n            <textarea placeholder=\"Description...\" {...register(\"description\")}/>\r\n            <p style={{color: \"red\"}}>{errors.title?.message}</p>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n        </form>\r\n    )\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}